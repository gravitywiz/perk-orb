description: >
  Run Cypress E2E tests.

parameters:
  gf-version:
    type: string
    description: "The version of Gravity Forms in use."

steps:
  - run:
      name: Run Cypress Tests
      command: |
        bash /scripts/docker-entrypoint.sh
      environment:
        # Project-wide environment vars do not need to be included here. They'll already be available.
        GF_VERSION: << parameters.gf-version >>
        CYPRESS_GF_VERSION: << parameters.gf-version >>
        WORDPRESS_DB_HOST: 127.0.0.1
        WORDPRESS_DB_USER: wordpress
        WORDPRESS_DB_PASSWORD: wordpress
        CYPRESS_BASE_URL: http://localhost
  - store_artifacts:
      path: /wordpress/wp-content/debug.log
